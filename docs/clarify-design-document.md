# Claude Orchestrator - Design Document

A standalone desktop application that provides a polished UI and granular control over Claude Code CLI orchestration workflows for feature planning and implementation.

## 1. Executive Summary

### Problem Statement

The current Claude Code CLI workflow (`/plan-feature` â†’ `/implement-plan`) is powerful but lacks visibility and control:

- **No visibility during execution**: Users wait 15+ minutes with no insight into progress
- **No intervention points**: Cannot review/modify intermediate outputs (refined request, file discovery)
- **Limited audit trail**: Difficult to track what happened during orchestration
- **No manual adjustments**: Cannot add/remove discovered files or modify implementation steps
- **No parallel workflows**: Cannot plan one feature while implementing another

### Solution

A standalone Electron desktop application that:

1. Wraps Claude Code CLI with a visual pipeline interface
2. Provides configurable pause points between orchestration steps
3. Enables inline editing of all intermediate outputs
4. Maintains comprehensive audit trails in a queryable database
5. Supports multiple concurrent workflows via git worktrees
6. Bundles customizable agents and commands with visual editors

### Key Design Decisions

| Decision              | Choice                                                   |
| --------------------- | -------------------------------------------------------- |
| App Type              | Standalone Electron app (not extending Clarify AI)       |
| CLI Integration       | Spawn Claude Code CLI as child processes                 |
| Real-time Visibility  | Progress updates at milestones (not full streaming)      |
| Concurrent Workflows  | Multiple supported via auto-managed git worktrees        |
| Intervention Mode     | Configurable (auto-pause vs continuous with manual stop) |
| Audit Trail           | SQLite database + exportable log files                   |
| Agent/Command Storage | Bundled with visual editor customization                 |
| Repository Management | Multi-repo projects                                      |
| Intermediate Editing  | Inline editing in pipeline view                          |
| Authentication        | Use existing Claude Code CLI credentials                 |
| UI Paradigm           | Pipeline view with expandable step details               |
| Templates             | Included template library for common patterns            |

---

## 2. Core Concepts

### 2.1 Workflows

A **Workflow** is an execution of either the planning or implementation orchestration.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PLANNING WORKFLOW                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Feature Request  â†’  [Clarify]  â†’  Refine  â†’  Discover  â†’  Plan    â”‚
â”‚       â†“                  â†“           â†“           â†“           â†“      â”‚
â”‚    (input)          (optional)   (output)    (output)    (output)   â”‚
â”‚                                                                     â”‚
â”‚  User can pause, edit, and regenerate at any step                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     IMPLEMENTATION WORKFLOW                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Plan  â†’  Route  â†’  [Step 1]  â†’  [Step 2]  â†’  ...  â†’  Quality Gate â”‚
â”‚   â†“        â†“           â†“            â†“                      â†“        â”‚
â”‚ (input)  (table)   (specialist) (specialist)           (validate)   â”‚
â”‚                                                                     â”‚
â”‚  User can pause, approve, skip, or rerun any step                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Projects

A **Project** groups related repositories and workflows.

- Can contain multiple repositories (mono-repo or related services)
- Workflows are scoped to a project
- Agent customizations can be project-specific or global

### 2.3 Worktrees

**Git Worktrees** enable parallel implementation workflows on the same repository.

- Each implementation workflow can optionally create a worktree
- App auto-manages worktree lifecycle (create on start, cleanup on completion)
- Users see feature branches, not worktree complexity
- Multiple implementations can run simultaneously on isolated branches

### 2.4 Agents

**Agents** are the specialist subagents that handle specific implementation domains.

| Agent                    | Domain                         |
| ------------------------ | ------------------------------ |
| `clarification-agent`    | Feature request clarity        |
| `file-discovery-agent`   | Codebase file discovery        |
| `implementation-planner` | Implementation plan generation |
| `database-schema`        | Drizzle ORM schemas            |
| `tanstack-query`         | TanStack Query hooks           |
| `tanstack-form`          | TanStack Form implementations  |
| `tanstack-form-base`     | Form field components          |
| `ipc-handler`            | Electron IPC handlers          |
| `frontend-component`     | React components               |
| `general-purpose`        | Everything else                |

---

## 3. Architecture

### 3.1 High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         RENDERER PROCESS                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    React + Next.js UI                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Dashboard â”‚ â”‚ Pipeline  â”‚ â”‚  Agents   â”‚ â”‚  Settings   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   View    â”‚ â”‚   View    â”‚ â”‚  Editor   â”‚ â”‚    Panel    â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                      â”‚
â”‚                         IPC Bridge                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MAIN PROCESS                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Orchestration Engine                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚  â”‚  â”‚   Workflow  â”‚ â”‚    CLI      â”‚ â”‚   Worktree  â”‚           â”‚   â”‚
â”‚  â”‚  â”‚   Manager   â”‚ â”‚   Spawner   â”‚ â”‚   Manager   â”‚           â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    SQLite     â”‚  â”‚  Agent/Cmd    â”‚  â”‚   File System         â”‚   â”‚
â”‚  â”‚   Database    â”‚  â”‚   Bundler     â”‚  â”‚   Access              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Claude Code CLI   â”‚
                    â”‚  (child processes)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Tech Stack

| Layer              | Technology                                         |
| ------------------ | -------------------------------------------------- |
| Framework          | Electron + Next.js (static export)                 |
| UI Library         | React 19                                           |
| Styling            | Tailwind CSS v4                                    |
| Components         | Base UI + CVA patterns                             |
| State Management   | TanStack Query + Zustand (for workflow state)      |
| Forms              | TanStack Form                                      |
| Database           | SQLite + Drizzle ORM                               |
| Process Management | Node.js child_process (spawn)                      |
| Code Editor        | Monaco Editor (for advanced agent editing)         |
| CLI Integration    | Claude Code CLI via spawn with JSON output parsing |

### 3.3 Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    projects     â”‚     â”‚  repositories   â”‚     â”‚   workflows     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚â”€â”€â”€â”€<â”‚ id              â”‚     â”‚ id              â”‚
â”‚ name            â”‚     â”‚ projectId       â”‚>â”€â”€â”€â”€â”‚ projectId       â”‚
â”‚ description     â”‚     â”‚ path            â”‚     â”‚ repositoryId    â”‚
â”‚ createdAt       â”‚     â”‚ name            â”‚     â”‚ type (plan/impl)â”‚
â”‚ updatedAt       â”‚     â”‚ isDefault       â”‚     â”‚ status          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ createdAt       â”‚     â”‚ worktreePath    â”‚
                        â”‚ updatedAt       â”‚     â”‚ featureBranch   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ config (JSON)   â”‚
                                                â”‚ createdAt       â”‚
                                                â”‚ updatedAt       â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     agents      â”‚     â”‚   templates     â”‚     â”‚ workflow_steps  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚     â”‚ id              â”‚     â”‚ id              â”‚
â”‚ name            â”‚     â”‚ name            â”‚     â”‚ workflowId      â”‚
â”‚ type            â”‚     â”‚ category        â”‚     â”‚ stepType        â”‚
â”‚ description     â”‚     â”‚ description     â”‚     â”‚ stepNumber      â”‚
â”‚ prompt (text)   â”‚     â”‚ template (text) â”‚     â”‚ status          â”‚
â”‚ allowedTools    â”‚     â”‚ createdAt       â”‚     â”‚ input (JSON)    â”‚
â”‚ isBuiltIn       â”‚     â”‚ updatedAt       â”‚     â”‚ output (JSON)   â”‚
â”‚ projectId (opt) â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ agentId         â”‚
â”‚ createdAt       â”‚                             â”‚ startedAt       â”‚
â”‚ updatedAt       â”‚                             â”‚ completedAt     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚ error (text)    â”‚
                                                â”‚ createdAt       â”‚
                                                â”‚ updatedAt       â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚   audit_logs    â”‚
                                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                                â”‚ id              â”‚
                                                â”‚ workflowId      â”‚
                                                â”‚ stepId          â”‚
                                                â”‚ eventType       â”‚
                                                â”‚ eventData (JSON)â”‚
                                                â”‚ timestamp       â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 CLI Integration Strategy

The app spawns Claude Code CLI processes with specific flags:

```typescript
interface CLISpawnOptions {
  cwd: string; // Repository or worktree path
  command: string; // e.g., '/plan-feature', '/implement-plan'
  args: string[]; // Command arguments
  timeout?: number; // Per-step timeout
  onProgress?: (event: ProgressEvent) => void;
  onComplete?: (result: CLIResult) => void;
  onError?: (error: CLIError) => void;
}

// Example: Spawning clarification step
spawn(
  "claude",
  [
    "--print", // Output mode
    "--output-format",
    "json", // Structured output
    "--cwd",
    "/path/to/repo",
    "--prompt",
    'Use clarification-agent to assess: "Add user auth"',
  ],
  options
);
```

**Progress Detection Strategy:**

1. Parse CLI stdout for milestone markers (e.g., `MILESTONE:STEP_1_COMPLETE`)
2. Extract structured JSON from output blocks
3. Detect completion via process exit or specific markers
4. Handle timeouts with configurable limits per step

---

## 4. User Interface Design

### 4.1 Application Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”  Claude Orchestrator                          â”€ â–¡ âœ•      â”‚
â”‚  â”‚ â‰¡   â”‚  Project: my-app  â–¾                                       â”‚
â”œâ”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚ â”‚Dashboard â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                                                 â”‚  â”‚
â”‚ â”‚Workflows â”‚  â”‚            [Main Content Area]                  â”‚  â”‚
â”‚ â”‚  Active  â”‚  â”‚                                                 â”‚  â”‚
â”‚ â”‚  â”œâ”€ Plan â”‚  â”‚                                                 â”‚  â”‚
â”‚ â”‚  â””â”€ Impl â”‚  â”‚                                                 â”‚  â”‚
â”‚ â”‚  History â”‚  â”‚                                                 â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                                                 â”‚  â”‚
â”‚ â”‚Templates â”‚  â”‚                                                 â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                                                 â”‚  â”‚
â”‚ â”‚Agents    â”‚  â”‚                                                 â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                                                 â”‚  â”‚
â”‚ â”‚Settings  â”‚  â”‚                                                 â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: 2 workflows active  â€¢  Last sync: 2 min ago              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Dashboard View

The dashboard provides an overview of all projects and active workflows.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard                                    [+ New Workflow]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Active Workflows (3)                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”µ Planning: Add user authentication                        â”‚   â”‚
â”‚  â”‚    Step 3/4: File Discovery  â€¢  Started 5 min ago           â”‚   â”‚
â”‚  â”‚    [View] [Pause] [Cancel]                                  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸŸ¢ Implementing: Dark mode toggle                           â”‚   â”‚
â”‚  â”‚    Step 7/12: frontend-component  â€¢  Started 12 min ago     â”‚   â”‚
â”‚  â”‚    Branch: feat/dark-mode  â€¢  [View] [Pause] [Cancel]       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â¸ï¸ Paused: API rate limiting                                 â”‚   â”‚
â”‚  â”‚    Waiting at: File Discovery (user review)                 â”‚   â”‚
â”‚  â”‚    [View] [Resume] [Cancel]                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  Recent Workflows                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Feature              â”‚ Type   â”‚ Status    â”‚ Duration â”‚ Date  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Email notifications  â”‚ Plan   â”‚ Completed â”‚ 8m 32s   â”‚ Today â”‚  â”‚
â”‚  â”‚ Search functionality â”‚ Impl   â”‚ Completed â”‚ 45m 12s  â”‚ Today â”‚  â”‚
â”‚  â”‚ User settings page   â”‚ Plan   â”‚ Failed    â”‚ 3m 15s   â”‚ Yest. â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 Planning Pipeline View

The pipeline view shows the planning workflow with inline editing.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Planning: Add user authentication with OAuth                       â”‚
â”‚  Repository: /Users/dev/my-app  â€¢  Started 5 min ago               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Clarify â”‚â”€â”€â”€â†’â”‚ Refine  â”‚â”€â”€â”€â†’â”‚Discover â”‚â”€â”€â”€â†’â”‚  Plan   â”‚         â”‚
â”‚  â”‚   âœ“     â”‚    â”‚   âœ“     â”‚    â”‚   â—     â”‚    â”‚   â—‹     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚       â”‚              â”‚              â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  File Discovery                                    [Running]  â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Progress: Analyzing codebase structure...                    â”‚  â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  55%                                   â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Files discovered so far:                                     â”‚  â”‚
â”‚  â”‚  â€¢ db/schema/users.schema.ts (High)                          â”‚  â”‚
â”‚  â”‚  â€¢ lib/validations/auth.ts (High)                            â”‚  â”‚
â”‚  â”‚  â€¢ components/auth/login-form.tsx (Medium)                   â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  [Pause] [Skip to Plan]                                       â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Previous Steps                                       [â–¼]    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  âœ“ Clarify (Skipped - Score 4/5)                            â”‚   â”‚
â”‚  â”‚    Reason: Request included specific technical details       â”‚   â”‚
â”‚  â”‚    [View Details]                                            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  âœ“ Refine                                            [Edit]  â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚    â”‚ Add OAuth-based user authentication using the     â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ Drizzle ORM patterns established in the project.  â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ Include login/logout flows, session management    â”‚    â”‚   â”‚
â”‚  â”‚    â”‚ via TanStack Query, and protected route...        â”‚    â”‚   â”‚
â”‚  â”‚    â”‚                                         [Expand]  â”‚    â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚    [Regenerate with Different Prompt]                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 File Discovery Editor

When file discovery completes, users can review and modify results.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File Discovery Results                              [Continue]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Discovered 12 files  â€¢  [+ Add File] [ğŸ”„ Re-run Discovery]        â”‚
â”‚                                                                     â”‚
â”‚  High Priority (Core Implementation)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [âœ“] db/schema/users.schema.ts                       [âœ•]     â”‚   â”‚
â”‚  â”‚     Create user table with OAuth fields                      â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚ [âœ“] db/repositories/users.repository.ts             [âœ•]     â”‚   â”‚
â”‚  â”‚     User CRUD operations with OAuth methods                  â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚ [âœ“] lib/validations/auth.ts                         [âœ•]     â”‚   â”‚
â”‚  â”‚     Validation schemas for login/register                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  Medium Priority (Supporting/Integration)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [âœ“] electron/ipc/auth.handlers.ts                   [âœ•]     â”‚   â”‚
â”‚  â”‚     IPC handlers for auth operations                         â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚ [ ] components/auth/login-form.tsx          [Change Priority] â”‚   â”‚
â”‚  â”‚     Login form component                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  Low Priority (May Need Updates)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [âœ“] app/(app)/layout.tsx                            [âœ•]     â”‚   â”‚
â”‚  â”‚     Add auth context provider                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.5 Implementation Pipeline View

The implementation workflow shows step routing and execution.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Implementing: Add user authentication                              â”‚
â”‚  Branch: feat/user-auth  â€¢  Worktree: .worktrees/user-auth         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Step Progress: 5/12                                                â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  42%                               â”‚
â”‚                                                                     â”‚
â”‚  Routing Table                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Step â”‚ Title                    â”‚ Agent              â”‚ Status â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  1   â”‚ Create users schema      â”‚ database-schema    â”‚   âœ“    â”‚  â”‚
â”‚  â”‚  2   â”‚ Create users repository  â”‚ database-schema    â”‚   âœ“    â”‚  â”‚
â”‚  â”‚  3   â”‚ Add auth validation      â”‚ tanstack-form      â”‚   âœ“    â”‚  â”‚
â”‚  â”‚  4   â”‚ Create auth IPC handlers â”‚ ipc-handler        â”‚   âœ“    â”‚  â”‚
â”‚  â”‚  5   â”‚ Create useAuth query     â”‚ tanstack-query     â”‚   â—    â”‚  â”‚
â”‚  â”‚  6   â”‚ Create LoginForm         â”‚ frontend-component â”‚   â—‹    â”‚  â”‚
â”‚  â”‚  7   â”‚ Gemini Review (Gate)     â”‚ gemini-review      â”‚   â—‹    â”‚  â”‚
â”‚  â”‚  8   â”‚ Create RegisterForm      â”‚ frontend-component â”‚   â—‹    â”‚  â”‚
â”‚  â”‚  9   â”‚ Add auth routes          â”‚ general-purpose    â”‚   â—‹    â”‚  â”‚
â”‚  â”‚ 10   â”‚ Update layout            â”‚ general-purpose    â”‚   â—‹    â”‚  â”‚
â”‚  â”‚ 11   â”‚ Final Gemini Review      â”‚ gemini-review      â”‚   â—‹    â”‚  â”‚
â”‚  â”‚ 12   â”‚ Quality Gates            â”‚ â€”                  â”‚   â—‹    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  Current Step: 5 - Create useAuth query                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Agent: tanstack-query                                       â”‚   â”‚
â”‚  â”‚  Status: Running                                             â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  Files:                                                       â”‚   â”‚
â”‚  â”‚  â€¢ hooks/queries/use-auth.ts (create)                        â”‚   â”‚
â”‚  â”‚  â€¢ lib/queries/auth.ts (create)                              â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  Progress:                                                    â”‚   â”‚
â”‚  â”‚  âœ“ Reading existing query patterns                           â”‚   â”‚
â”‚  â”‚  âœ“ Creating query key factory                                â”‚   â”‚
â”‚  â”‚  â— Implementing useAuth hook                                 â”‚   â”‚
â”‚  â”‚  â—‹ Running validation                                        â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  [Pause] [Skip Step] [View Agent Output]                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.6 Agent Editor

Visual editor for customizing bundled agents.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Editor: database-schema                    [Save] [Revert]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Name                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ database-schema                                        â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Description                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Creates and modifies Drizzle ORM database schemas...   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Color Tag                                                    â”‚  â”‚
â”‚  â”‚  â— green  â—‹ blue  â—‹ yellow  â—‹ cyan  â—‹ red                    â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Allowed Tools                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ [âœ“] Read(*)                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [âœ“] Write(*)                                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [âœ“] Edit(*)                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [âœ“] Glob(*)                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [âœ“] Grep(*)                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [âœ“] Bash(pnpm db:generate)                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [âœ“] Bash(pnpm db:migrate)                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [âœ“] Bash(pnpm lint)                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [âœ“] Bash(pnpm typecheck)                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [ ] Skill(database-schema-conventions)                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [+ Add Tool]                                           â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  System Prompt                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ You are a specialized database schema agent            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ responsible for creating and modifying Drizzle ORM     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ schemas in this project...                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                            [Expand â†“]  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Referenced Skills                                            â”‚  â”‚
â”‚  â”‚  â€¢ database-schema-conventions         [View] [Detach]        â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  [Test Agent] [Duplicate] [Export] [Reset to Default]              â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.7 Settings Panel

Global application settings.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Settings                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Workflow Execution                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                     â”‚
â”‚  Default Pause Behavior                                             â”‚
â”‚  â—‹ Continuous (manual stop to intervene)                            â”‚
â”‚  â— Auto-pause after each step                                       â”‚
â”‚  â—‹ Pause at quality gates only                                      â”‚
â”‚                                                                     â”‚
â”‚  Step Timeouts                                                      â”‚
â”‚  Clarification:  [  60 ] seconds                                    â”‚
â”‚  Refinement:     [  30 ] seconds                                    â”‚
â”‚  File Discovery: [ 120 ] seconds                                    â”‚
â”‚  Planning:       [ 180 ] seconds                                    â”‚
â”‚  Implementation: [ 300 ] seconds per step                           â”‚
â”‚                                                                     â”‚
â”‚  Git Worktrees                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                     â”‚
â”‚  Worktree Location                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ .worktrees/{feature-slug}                            [...]  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                     â”‚
â”‚  [âœ“] Auto-cleanup worktrees after implementation completes          â”‚
â”‚  [âœ“] Create feature branch automatically                            â”‚
â”‚  [ ] Push branch to remote on completion                            â”‚
â”‚                                                                     â”‚
â”‚  Logging & Audit                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                     â”‚
â”‚  Log Retention                                                      â”‚
â”‚  Keep workflow logs for: [ 30 ] days                                â”‚
â”‚                                                                     â”‚
â”‚  [âœ“] Export logs alongside database entries                         â”‚
â”‚  [âœ“] Include full CLI output in audit logs                          â”‚
â”‚                                                                     â”‚
â”‚  Log Export Location                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ~/Documents/claude-orchestrator-logs               [...]    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                     â”‚
â”‚                                                    [Save Settings]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Feature Specifications

### 5.1 New Planning Workflow

**Entry Point:** Dashboard â†’ "New Workflow" button

**Flow:**

1. **Select Repository**
   - Choose from project repositories
   - Option to add new repository

2. **Enter Feature Request**
   - Text area for feature description
   - Option to select from template library
   - Display template suggestions based on keywords

3. **Configure Workflow**
   - Pause behavior (continuous/auto-pause/gates-only)
   - Step timeouts (use defaults or customize)
   - Skip clarification toggle

4. **Start Workflow**
   - Creates workflow record in database
   - Spawns Claude Code CLI process
   - Redirects to Pipeline View

**State Transitions:**

```
CREATED â†’ CLARIFYING â†’ REFINING â†’ DISCOVERING â†’ PLANNING â†’ COMPLETED
           â†“             â†“            â†“            â†“
        PAUSED        PAUSED       PAUSED       PAUSED
           â†“             â†“            â†“            â†“
        EDITING       EDITING      EDITING      EDITING
           â†“             â†“            â†“            â†“
        REGENERATING  REGENERATING REGENERATING REGENERATING
```

### 5.2 Inline Editing

**Trigger:** Click "Edit" button on any completed step

**Behavior:**

1. Step output becomes editable (rich text for prose, structured editor for file lists)
2. Changes are auto-saved to workflow_steps table
3. "Regenerate" button available to re-run step with modified prompt
4. Downstream steps marked as "stale" (need re-run) when upstream edited

**Constraints:**

- Cannot edit while step is running
- Editing marks all downstream steps as needing refresh
- Option to "cascade regenerate" all downstream steps

### 5.3 File Discovery Editor

**Features:**

- Checkbox to include/exclude files
- Drag-drop to change priority (High/Medium/Low)
- "Add File" button with file picker
- "Re-run Discovery" with optional modified prompt
- Search/filter discovered files

**Data Model:**

```typescript
interface DiscoveredFile {
  path: string;
  priority: "high" | "medium" | "low";
  description: string;
  included: boolean;
  userAdded: boolean;
}
```

### 5.4 Implementation Workflow

**Entry Point:**

- From completed planning workflow â†’ "Implement" button
- From saved plan file â†’ Import

**Flow:**

1. **Review Plan**
   - Display parsed implementation plan
   - Allow step reordering/editing before execution

2. **Configure Worktree**
   - Auto-generate feature branch name from plan title
   - Option to use existing branch
   - Display worktree path

3. **Routing Table Generation**
   - Auto-map steps to specialist agents
   - Allow manual agent overrides
   - Validate all steps have agents

4. **Execution**
   - Sequential step execution
   - Progress tracking per step
   - Pause/resume at any point

5. **Quality Gates**
   - Run lint/typecheck
   - Gemini review steps
   - User approval gates

6. **Completion**
   - Summary of changes
   - Commit prompt (optional)
   - Worktree cleanup (optional)

### 5.5 Concurrent Workflows

**Enabled By:** Git worktrees

**Rules:**

- Each implementation workflow gets its own worktree
- Planning workflows don't need worktrees (read-only analysis)
- Maximum concurrent implementations: 3 (configurable)
- Worktree naming: `.worktrees/{feature-slug}-{timestamp}`

**UI Handling:**

- Dashboard shows all active workflows
- Each workflow indicates its branch/worktree
- Conflict detection if same file modified in multiple workflows

### 5.6 Template Library

**Built-in Templates:**

| Template         | Category | Description                          |
| ---------------- | -------- | ------------------------------------ |
| CRUD Feature     | Data     | Database table + repository + UI     |
| Form Component   | UI       | TanStack Form with validation        |
| API Integration  | Backend  | External API with query hooks        |
| Auth Flow        | Security | Login/logout with session management |
| Dashboard Widget | UI       | Card component with data display     |
| IPC Channel      | Electron | Main/renderer communication          |
| Settings Page    | UI       | User preferences with persistence    |

**Template Structure:**

```typescript
interface Template {
  id: string;
  name: string;
  category: string;
  description: string;
  template: string; // Feature request template with placeholders
  placeholders: {
    name: string;
    description: string;
    defaultValue?: string;
  }[];
}
```

### 5.7 Audit Trail

**Captured Events:**

| Event Type         | Data Captured                               |
| ------------------ | ------------------------------------------- |
| WORKFLOW_CREATED   | Initial config, repository, feature request |
| STEP_STARTED       | Step type, agent, input                     |
| STEP_COMPLETED     | Output, duration, files affected            |
| STEP_FAILED        | Error message, CLI output                   |
| STEP_PAUSED        | Reason (auto/manual/error)                  |
| STEP_RESUMED       | Who resumed, any modifications              |
| OUTPUT_EDITED      | Before/after, user                          |
| STEP_REGENERATED   | Modified prompt, new output                 |
| FILE_ADDED         | Path, priority, user-added flag             |
| FILE_REMOVED       | Path, reason                                |
| WORKTREE_CREATED   | Path, branch name                           |
| WORKTREE_CLEANED   | Path, files committed                       |
| QUALITY_GATE       | Pass/fail, output                           |
| WORKFLOW_COMPLETED | Final status, duration, files changed       |

**Export Format:**

```markdown
# Workflow Audit Log: Add User Authentication

**ID:** wf_abc123
**Created:** 2025-01-28T10:30:00Z
**Completed:** 2025-01-28T11:15:32Z
**Status:** Completed
**Repository:** /Users/dev/my-app
**Branch:** feat/user-auth

## Timeline

### 10:30:00 - Workflow Created

- Feature Request: "Add user authentication with OAuth"
- Pause Mode: auto-pause

### 10:30:05 - Clarification Started

- Agent: clarification-agent
- Input: "Add user authentication with OAuth"

### 10:30:42 - Clarification Completed

- Result: SKIP (Score 4/5)
- Reason: Request included specific technical details
- Duration: 37s

[... continued ...]
```

---

## 6. Technical Implementation

### 6.1 Process Management

**CLI Spawner Service:**

```typescript
class CLISpawner {
  private processes: Map<string, ChildProcess> = new Map();

  async spawn(workflowId: string, options: SpawnOptions): Promise<void> {
    const proc = spawn("claude", [
      "--print",
      "--output-format",
      "json",
      "--cwd",
      options.cwd,
      "--prompt",
      options.prompt,
    ]);

    this.processes.set(workflowId, proc);

    proc.stdout.on("data", (data) => {
      this.parseProgress(workflowId, data);
    });

    proc.on("exit", (code) => {
      this.handleCompletion(workflowId, code);
    });
  }

  async pause(workflowId: string): Promise<void> {
    // Send SIGSTOP to pause process
  }

  async resume(workflowId: string): Promise<void> {
    // Send SIGCONT to resume
  }

  async kill(workflowId: string): Promise<void> {
    // Graceful termination
  }
}
```

### 6.2 Worktree Manager

```typescript
class WorktreeManager {
  async create(repoPath: string, featureSlug: string): Promise<WorktreeInfo> {
    const worktreePath = path.join(repoPath, ".worktrees", featureSlug);
    const branchName = `feat/${featureSlug}`;

    await exec(`git worktree add -b ${branchName} ${worktreePath}`);
    await exec("pnpm install", { cwd: worktreePath });

    return { path: worktreePath, branch: branchName };
  }

  async cleanup(worktreePath: string): Promise<void> {
    await exec(`git worktree remove ${worktreePath}`);
  }

  async list(repoPath: string): Promise<WorktreeInfo[]> {
    // Parse git worktree list output
  }
}
```

### 6.3 Progress Parsing

**Milestone Detection:**

````typescript
const MILESTONES = {
  "MILESTONE:STEP_0A_COMPLETE": "clarification_complete",
  "MILESTONE:STEP_0A_SKIPPED": "clarification_skipped",
  "MILESTONE:STEP_1_COMPLETE": "refinement_complete",
  "MILESTONE:STEP_2_COMPLETE": "discovery_complete",
  "MILESTONE:STEP_3_COMPLETE": "planning_complete",
  "MILESTONE:PLAN_FEATURE_SUCCESS": "workflow_complete",
};

function parseProgress(output: string): ProgressEvent | null {
  for (const [marker, event] of Object.entries(MILESTONES)) {
    if (output.includes(marker)) {
      return { type: event, raw: output };
    }
  }

  // Parse JSON blocks for structured data
  const jsonMatch = output.match(/```json\n([\s\S]*?)\n```/);
  if (jsonMatch) {
    return { type: "structured_output", data: JSON.parse(jsonMatch[1]) };
  }

  return null;
}
````

### 6.4 IPC Channels

```typescript
// Main process channels
const CHANNELS = {
  // Workflow management
  'workflow:create': async (config: WorkflowConfig) => Promise<Workflow>,
  'workflow:start': async (id: string) => Promise<void>,
  'workflow:pause': async (id: string) => Promise<void>,
  'workflow:resume': async (id: string) => Promise<void>,
  'workflow:cancel': async (id: string) => Promise<void>,
  'workflow:get': async (id: string) => Promise<Workflow>,
  'workflow:list': async (filters?: WorkflowFilters) => Promise<Workflow[]>,

  // Step management
  'step:edit': async (stepId: string, output: unknown) => Promise<void>,
  'step:regenerate': async (stepId: string, prompt?: string) => Promise<void>,

  // File discovery
  'discovery:update': async (workflowId: string, files: DiscoveredFile[]) => Promise<void>,

  // Agent management
  'agent:list': async () => Promise<Agent[]>,
  'agent:get': async (id: string) => Promise<Agent>,
  'agent:update': async (id: string, data: Partial<Agent>) => Promise<void>,
  'agent:reset': async (id: string) => Promise<void>,

  // Template management
  'template:list': async () => Promise<Template[]>,
  'template:create': async (data: NewTemplate) => Promise<Template>,

  // Project/Repository management
  'project:create': async (data: NewProject) => Promise<Project>,
  'project:addRepo': async (projectId: string, path: string) => Promise<Repository>,

  // Audit
  'audit:export': async (workflowId: string, format: 'md' | 'json') => Promise<string>,

  // Progress events (renderer subscribes)
  'workflow:progress': (callback: (event: ProgressEvent) => void) => void,
};
```

---

## 7. Data Flow Diagrams

### 7.1 Planning Workflow Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        RENDERER PROCESS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Create   â”‚          â”‚ Subscribe â”‚          â”‚   Edit    â”‚
  â”‚ Workflow  â”‚          â”‚ Progress  â”‚          â”‚  Output   â”‚
  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚                      â”‚                      â”‚
        â”‚ IPC                  â”‚ IPC                  â”‚ IPC
        â”‚                      â”‚                      â”‚
        â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MAIN PROCESS                                â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Workflow   â”‚â”€â”€â”€â–¶â”‚    CLI      â”‚â”€â”€â”€â–¶â”‚   Parse     â”‚             â”‚
â”‚  â”‚   Manager   â”‚    â”‚   Spawner   â”‚    â”‚  Progress   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                  â”‚                  â”‚                     â”‚
â”‚         â–¼                  â–¼                  â–¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   SQLite    â”‚    â”‚ Claude CLI  â”‚    â”‚   Emit to   â”‚             â”‚
â”‚  â”‚  Database   â”‚â—€â”€â”€â”€â”‚  Process    â”‚â”€â”€â”€â–¶â”‚  Renderer   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Concurrent Implementation Flow

```
Repository: /path/to/repo
    â”‚
    â”œâ”€â”€ .worktrees/
    â”‚       â”œâ”€â”€ user-auth-1706450000/     â† Workflow A
    â”‚       â”‚       â””â”€â”€ (full checkout)
    â”‚       â”‚
    â”‚       â””â”€â”€ dark-mode-1706451000/     â† Workflow B
    â”‚               â””â”€â”€ (full checkout)
    â”‚
    â””â”€â”€ (main working directory)          â† No active implementation

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         WORKFLOW MANAGER                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Workflow A (user-auth)          Workflow B (dark-mode)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Status: Running     â”‚         â”‚ Status: Running     â”‚           â”‚
â”‚  â”‚ Step: 5/12          â”‚         â”‚ Step: 3/8           â”‚           â”‚
â”‚  â”‚ Agent: tanstack-qry â”‚         â”‚ Agent: db-schema    â”‚           â”‚
â”‚  â”‚ Worktree: user-auth â”‚         â”‚ Worktree: dark-mode â”‚           â”‚
â”‚  â”‚                     â”‚         â”‚                     â”‚           â”‚
â”‚  â”‚ CLI Process #1      â”‚         â”‚ CLI Process #2      â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Migration & Deployment

### 8.1 Agent Bundling

The app bundles default agents from the current `.claude/` structure:

```
bundled-agents/
â”œâ”€â”€ planning/
â”‚   â”œâ”€â”€ clarification-agent.md
â”‚   â”œâ”€â”€ file-discovery-agent.md
â”‚   â””â”€â”€ implementation-planner.md
â”œâ”€â”€ specialists/
â”‚   â”œâ”€â”€ database-schema.md
â”‚   â”œâ”€â”€ frontend-component.md
â”‚   â”œâ”€â”€ ipc-handler.md
â”‚   â”œâ”€â”€ tanstack-form.md
â”‚   â”œâ”€â”€ tanstack-form-base-components.md
â”‚   â”œâ”€â”€ tanstack-query.md
â”‚   â”œâ”€â”€ gemini-review.md
â”‚   â””â”€â”€ general-purpose.md
â””â”€â”€ skills/
    â”œâ”€â”€ database-schema-conventions/
    â”œâ”€â”€ component-conventions/
    â”œâ”€â”€ react-coding-conventions/
    â””â”€â”€ [other skills...]
```

**On First Launch:**

1. Copy bundled agents to app data directory
2. Parse markdown to extract metadata (name, tools, prompt)
3. Seed database with agent records
4. Mark as `isBuiltIn: true`

### 8.2 Build Configuration

```javascript
// electron-builder config
{
  appId: 'com.example.claude-orchestrator',
  productName: 'Claude Orchestrator',
  files: [
    'out/**/*',
    'bundled-agents/**/*',
    'templates/**/*'
  ],
  extraResources: [
    {
      from: 'bundled-agents',
      to: 'agents'
    },
    {
      from: 'templates',
      to: 'templates'
    }
  ]
}
```

---

## 9. Future Considerations

### 9.1 Potential Enhancements

1. **Claude Code SDK Integration**
   - When SDK matures, migrate from CLI spawning
   - Better streaming and control

2. **Collaborative Workflows**
   - Share workflows between team members
   - Sync agent customizations

3. **Analytics Dashboard**
   - Workflow success rates
   - Agent performance metrics
   - Time-to-completion trends

4. **Plugin System**
   - Custom agents via plugins
   - Integration with other AI tools

5. **Cloud Sync**
   - Backup workflows to cloud
   - Cross-device synchronization

### 9.2 Known Limitations

1. **CLI Dependency**
   - Requires Claude Code CLI installed
   - CLI updates may break parsing

2. **Process Management**
   - Windows process signals differ from Unix
   - May need platform-specific handling

3. **Worktree Limits**
   - Git worktrees have some edge cases
   - Submodules may need special handling

---

## 10. Success Metrics

| Metric                       | Target                              |
| ---------------------------- | ----------------------------------- |
| Time from request to plan    | < 10 minutes (vs 15+ with CLI)      |
| User interventions per plan  | Trackable (currently unmeasured)    |
| Implementation success rate  | > 90% of steps pass validation      |
| Workflow completion rate     | > 85% of started workflows complete |
| Audit log completeness       | 100% of events captured             |
| Concurrent workflow capacity | 3+ simultaneous implementations     |

---

## 11. Open Questions

1. **CLI Output Format**: Does Claude Code CLI support structured JSON output mode, or do we need to parse plain text?

2. **Process Pause/Resume**: Can we reliably pause/resume CLI processes, or do we need to implement checkpointing?

3. **Worktree Cleanup**: What happens to uncommitted changes when a workflow is cancelled?

4. **Rate Limits**: How do we handle API rate limits when running concurrent workflows?

5. **Agent Updates**: How do we handle updates to bundled agents while preserving user customizations?

---

## Appendix A: Workflow State Machine

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                                 â”‚
                    â–¼                                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚CREATED â”‚â”€â”€â”€â”€â–¶â”‚RUNNING â”‚â”€â”€â”€â”€â–¶â”‚PAUSED  â”‚â”€â”€â”€â”€â–¶â”‚ EDITING   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚
                    â”‚              â”‚
                    â–¼              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
              â”‚COMPLETEâ”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚FAILED  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Transitions:
- CREATED â†’ RUNNING: User starts workflow
- RUNNING â†’ PAUSED: Auto-pause or manual pause
- RUNNING â†’ COMPLETE: All steps finished
- RUNNING â†’ FAILED: Unrecoverable error
- PAUSED â†’ RUNNING: User resumes
- PAUSED â†’ EDITING: User edits output
- EDITING â†’ PAUSED: Edit saved, not resumed
- EDITING â†’ RUNNING: Edit saved, auto-resume
```

---

## Appendix B: CLI Command Examples

**Planning Workflow:**

```bash
# Step 1: Clarification
claude --print --cwd /repo --prompt "Use Task tool with clarification-agent: 'Add OAuth login'"

# Step 2: Refinement
claude --print --cwd /repo --prompt "Use Task tool with general-purpose to refine: '...'"

# Step 3: File Discovery
claude --print --cwd /repo --prompt "Use Task tool with file-discovery-agent: '...'"

# Step 4: Planning
claude --print --cwd /repo --prompt "Use Task tool with implementation-planner: '...'"
```

**Implementation Workflow:**

```bash
# Setup worktree
git worktree add -b feat/oauth .worktrees/oauth
cd .worktrees/oauth && pnpm install

# Execute steps
claude --print --cwd .worktrees/oauth --prompt "Use Task tool with database-schema: 'Step 1...'"
claude --print --cwd .worktrees/oauth --prompt "Use Task tool with tanstack-query: 'Step 2...'"
# ... etc
```

---

_Document Version: 1.0_
_Last Updated: 2025-01-28_
_Author: Design Session with Claude_
