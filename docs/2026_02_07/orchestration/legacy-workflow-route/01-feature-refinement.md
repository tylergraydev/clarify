# Step 1: Feature Refinement

**Status**: Completed

## Refined Feature Request

Relocate the existing workflow detail page implementation from `app/(app)/workflows/[id]/page.tsx` and its corresponding `route-type.ts` to a new legacy route structure at `app/(app)/workflows/old/[id]/page.tsx` with an accompanying `route-type.ts` file that preserves the same Zod validation schema for the `id` route parameter and optional `step` search parameter. This is strictly a route relocation without any modifications to page content, component imports, or the specialized workflow detail components located in `components/workflows/detail/` such as `WorkflowTopBar`, `WorkflowStepAccordion`, `WorkflowStreamingPanel`, and `ClarificationStreamProvider`. After moving the legacy route, create a new minimal placeholder implementation at `app/(app)/workflows/[id]/page.tsx` that maintains the same `route-type.ts` validation schema (accepting the `id` route param and optional `step` search param) but renders only basic workflow information fetched via TanStack React Query hooks -- specifically displaying the workflow name retrieved from the database through the existing IPC layer and a temporary "Coming soon" or empty state message styled with Tailwind CSS classes to indicate that a new workflow detail interface is under development. The placeholder should use the same data fetching patterns as other pages in the application, utilizing the workflows query key factory from `lib/queries/` and the `useWorkflow` hook if available, but render a simplified UI without the complex step accordion, streaming panel, or clarification components. In `components/shell/app-sidebar.tsx`, extend the existing collapsible Workflows navigation section by adding a fourth nav item labeled "Legacy" positioned below the current Active, Created, and History items, using the `Archive` or `FolderArchive` icon from `lucide-react` for visual consistency. This new Legacy nav item should link to `/workflows/old/active` or serve as an intuitive entry point to access the relocated old workflow detail UI, following the established patterns in the sidebar: utilizing the `$path()` helper from `next-typesafe-url` for type-safe route generation, the `NavItem` component with appropriate CVA variant props, and respecting the `CollapsedNavMenu` component's behavior when the sidebar is collapsed. After creating the new route file structure at `app/(app)/workflows/old/[id]/`, execute `pnpm next-typesafe-url` to regenerate the type-safe route definitions ensuring the new `/workflows/old/[id]` route is properly typed. Do not modify any existing workflow list pages, nor their row click handlers or view buttons that currently navigate to workflow detail -- these should continue linking to the new placeholder route at `/workflows/[id]`.
